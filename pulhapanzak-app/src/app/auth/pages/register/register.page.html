<ion-header [translucent]="true">
  <ion-toolbar style="--background: red">
    <ion-title></ion-title>
  </ion-toolbar>
</ion-header>

<!--
Clean Architecture: cada instancia en la carpeta app tendra una estructura de la siguiente forma:
components - models - pages - services 
-->
<ion-content [fullscreen]="true" [ngClass]="'ion-content'">
  <h2 [ngClass]="'h2'">
    Registro
  </h2>

  <!-- Creamos formulario de Registro, el (ngSubmit)="save()" activa la funcion save() -->
  <form style="width: 100%" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div [ngClass]="'div'">
      <!--ion-label e ion-input para Nombres: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="person-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">Nombres:</span>
          <ion-note class="form--error-menssage">
            <span *ngIf="isNombresNull"> Los Nombres son Requeridos. *</span>
          </ion-note>
        </div>
        <ion-input [ngClass]="
      {
      'ionInputStyle': !isNombresNull,
      'ionInputStyle-invalid': isNombresNull
      }" placeholder="Ej. Jose Jose" type="text" formControlName="nombres"></ion-input>
      </div>
      <!--Utilizamos el formControlName="nombres" para hacer binding del registerForm y su campo nombres['']-->
      <br />

      <!--ion-label e ion-input para Apellidos: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="person-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">Apellidos:</span>
          <ion-note class="form--error-menssage">
            <span *ngIf="isApellidosNull"> Los Apellidos son Requeridos. *</span>
          </ion-note>
        </div>
        <ion-input [ngClass]="
      {
        'ionInputStyle': !isApellidosNull,
        'ionInputStyle-invalid': isApellidosNull
      }" placeholder="Ej. Aguilar Paz" type="text" formControlName="apellidos"></ion-input>
      </div>
      <br />

      <!--ion-label e ion-input para Correo: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="at-circle-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">Correo:</span>
          <ion-note class="form--error-menssage">
            <span *ngIf="isEmailRequired"> El correo es Requerido *</span>
            <span *ngIf="isEmailInvalid">
              El correo electronico es invalido. *</span>
          </ion-note>
        </div>
        <ion-input [ngClass]="
      {
        'ionInputStyle': !isEmailRequired && !isEmailInvalid,
        'ionInputStyle-invalid': isEmailRequired || isEmailInvalid
      }" placeholder="Ej. correo@gmail.com" type="email" formControlName="correo"></ion-input>
      </div>
      <br />

      <!--ion-label e ion-input para Contraseña: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="lock-open-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">Contraseña:</span>
          <ion-note *ngIf="isPasswordMinLengthInvalid" class="form--error-menssage">
            Debe ingresar una Contraseña de 6 caracteres o mas. *</ion-note>
        </div>
        <ion-input [ngClass]="
      {
        'ionInputStyle': !isPasswordMinLengthInvalid,
        'ionInputStyle-invalid': isPasswordMinLengthInvalid
      }" placeholder="Ej. Password123" type="password" formControlName="contraseña">
          <ion-input-password-toggle slot="end"></ion-input-password-toggle></ion-input>
      </div>
      <br />

      <!--ion-label e ion-input para DNI: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="id-card-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">DNI:</span>
          <ion-note class="form--error-menssage">
            <ion-note *ngIf="isDniMinLengthInvalid" class="form--error-menssage">
              El DNI es obligatorio y no puede ser menor de 13 digitos.
              *</ion-note>
            <ion-note *ngIf="isDniMaxLengthInvalid" class="form--error-menssage">
              El DNI no puede ser mayor de 13 digitos. *</ion-note>
            <ion-note *ngIf="isDniHasLettersOrSpaces" class="form--error-menssage">
              El DNI no puede contener letras o espacios. *</ion-note>
          </ion-note>
        </div>
        <ion-input [ngClass]="
      {
        'ionInputStyle': !isDniMinLengthInvalid && !isDniMaxLengthInvalid && !isDniHasLettersOrSpaces,
        'ionInputStyle-invalid': isDniMinLengthInvalid || isDniMaxLengthInvalid || isDniHasLettersOrSpaces
      }" placeholder="Ej. 0801200012345" type="text" formControlName="dni"></ion-input>
      </div>
      <br />

      <!--ion-label e ion-input para Telefono: -->
      <div [ngClass]="'div'">
        <div [ngClass]="'divIconLabel'">
          <ion-icon name="call-outline" [ngClass]="'ion-icon'"></ion-icon>
          <span class="label-text" style="color: black;">Telefono:</span>
          <ion-note class="form--error-menssage">
            <ion-note *ngIf="isTelefonoInvalid || isTelefonoIMinInvalid" class="form--error-menssage">
              El Telefono es obligatorio y no puede ser menor de 8 digitos.
              *</ion-note>
          </ion-note>
        </div>
        <ion-input [ngClass]="
      {
        'ionInputStyle': !isTelefonoInvalid && !isTelefonoIMinInvalid,
        'ionInputStyle-invalid': isTelefonoInvalid || isTelefonoIMinInvalid
      }" placeholder="Ej. 97868399" type="tel" formControlName="telefono"></ion-input>
      </div>
      <br />

      <!-- ion-button y ion-spinner para registrar usuario -->
      <div [ngClass]="'divButton'">
        <ion-button type="submit" color="success" [disabled]="isFormInvalid || disabled">
          <!--*ngIf activara la animacion cuando spinner sea true-->
          <ion-spinner *ngIf="spinner" style="margin-right: 10px"></ion-spinner>
          Registrar
        </ion-button>
      </div>
    </div>
  </form>

  <div [ngClass]="'center-container'">
    <span [ngClass]="'span'">¿Ya tienes una cuenta?</span>
    <span [ngClass]="'spanRedirect'" (click)="goToLogin()"> Iniciar Sesión</span>
  </div>
</ion-content>